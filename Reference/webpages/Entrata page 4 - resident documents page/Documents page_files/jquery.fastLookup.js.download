var DATA_BLOB_TYPE_LEASE_CUSTOMERS 			= 1;
var DATA_BLOB_TYPE_LEASE_PROPERTIES 		= 2;
var DATA_BLOB_TYPE_LEASE_LEADS 				= 3;
var DATA_BLOB_TYPE_LEASE_EMPLOYEES 			= 4;
var DATA_BLOB_TYPE_LEASE_OWNERS 			= 5;
var DATA_BLOB_TYPE_LEASE_VENDORS 			= 6;
var DATA_BLOB_TYPE_LEASE_CUSTOMERS_LEADS	= 7;

var	LOOKUP_TYPE_AP_CODES							= 'ap_codes';
var LOOKUP_TYPE_PROPERTY_UNITS						= 'property_units';
var LOOKUP_TYPE_COMPANY_EMPLOYEES					= 'company_employees';
var LOOKUP_TYPE_CUSTOMERS_FOR_CHECK21_BATCHES		= 'customers_for_check21_batches';
var LOOKUP_TYPE_AR_CODES							= 'ar_codes';
var LOOKUP_TYPE_CUSTOMERS_UNDELIVERED_PACKAGES 		= 'customers_for_undelivered_packages';
var LOOKUP_TYPE_CURRENT_FUTURE_RESIDENTS			= 'current_future_residents';
var LOOKUP_TYPE_CALL_CENTER_WORK_ORDER_RESIDENTS 	= 'call_center_work_order_residents';
var LOOKUP_TYPE_ACCOUNTING_VENDORS					= 'accounting_vendors';
var LOOKUP_TYPE_AP_PAYEES_GL_ACCOUNT				= 'ap_payees_gl_account';
var LOOKUP_TYPE_GL_ACCOUNT_IS_LINKED_TO_PROPERTIES	= 'gl_account_is_linked_to_properties';
var LOOKUP_TYPE_GL_ACCOUNTS							= 'gl_accounts';
var LOOKUP_TYPE_PURCHASE_ORDERS_PO_NUMBER			= 'purchase_orders_po_number';
var LOOKUP_TYPE_VENDOR_PURCHASE_ORDERS_PO_NUMBER	= 'vendor_purchase_orders_po_number';
var LOOKUP_TYPE_PURCHASE_ORDERS_VENDOR				= 'purchase_orders_vendor';
var LOOKUP_TYPE_PURCHASE_ORDERS_CREATED_BY			= 'purchase_orders_created_by';
var LOOKUP_TYPE_ADD_PURCHASE_ORDER_VENDOR			= 'add_purchase_order_vendor';
var LOOKUP_TYPE_ADD_PURCHASE_ORDER_PROPERTY			= 'add_purchase_order_property';
var LOOKUP_TYPE_APPROVE_PURCHASE_ORDERS_CREATED_BY	= 'approve_purchase_orders_created_by';
var LOOKUP_TYPE_APPROVE_PURCHASE_ORDERS_PO_NUMBER	= 'approve_purchase_orders_po_number';
var LOOKUP_TYPE_APPROVE_PURCHASE_ORDERS_VENDOR		= 'approve_purchase_orders_vendor';
var LOOKUP_TYPE_BANK_ACCOUNTS				 		= 'bank_accounts';
var LOOKUP_TYPE_PROPERTIES							= 'properties';
var LOOKUP_TYPE_PROPERTIES_AND_GROUPS 				= 'properties_and_groups';
var LOOKUP_TYPE_ACCOUNTING_INVOICES					= 'accounting_invoices';
var LOOKUP_TYPE_INVOICES_VENDOR						= 'invoices_vendor';
var LOOKUP_TYPE_INVOICE_PO_NUMBER					= 'invoice_po_number';
var LOOKUP_TYPE_ATTACHED_PO_NUMBER					= 'attached_po_number';
var LOOKUP_TYPE_BULK_INVOICE_VENDOR					= 'bulk_invoice_vendor';
var LOOKUP_TYPE_DEFAULT_PROPERTY					= 'default_property';
var LOOKUP_TYPE_APPROVE_ACCOUNTING_INVOICES			= 'approve_accounting_invoices';
var LOOKUP_TYPE_APPROVE_INVOICES_VENDOR				= 'approve_invoices_vendor';
var LOOKUP_TYPE_APPROVE_PAYMENT_INVOICE				= 'approve_payment_invoice';
var LOOKUP_TYPE_APPROVE_PAYMENT_VENDOR				= 'approve_payment_vendor';
var LOOKUP_TYPE_FINANCIAL_TRANSACTION_INVOICE		= 'financial_transaction_invoice';
var LOOKUP_TYPE_PROCESS_CHECKS_INVOICE_NUMBER		= 'process_checks_invoice_number';
var LOOKUP_TYPE_PROCESS_CHECKS_VENDOR				= 'process_checks_vendor';
var LOOKUP_TYPE_PROCESS_CHECKS_CC_INVOICE_NUMBER	= 'process_checks_cc_invoice_number';
var LOOKUP_TYPE_PROCESS_CHECKS_CC_VENDOR			= 'process_checks_cc_vendor';
var LOOKUP_TYPE_ACCOUNTING_CHECKS_PAYEE				= 'accounting_checks_payee';
var LOOKUP_TYPE_ACCOUNTING_CHECKS_PAYMENT_NUMBER	= 'accounting_checks_payment_number';
var LOOKUP_TYPE_JOURNAL_ENTRY						= 'journal_entry';
var LOOKUP_TYPE_GENERAL_JOURNAL_PROPERTIES			= 'general_journal_properties';
var LOOKUP_TYPE_AP_PAYEE_LOCATION_NAME				= 'ap_payee_location_name';
var LOOKUP_TYPE_VP_LOCATION_NAME					= 'vp_location_name';
var LOOKUP_TYPE_VENDOR_LOCATION_NAME				= 'vendor_location_name';
var LOOKUP_TYPE_DEBIT_GL_ACCOUNTS					= 'debit_gl_accounts';
var LOOKUP_TYPE_CREDIT_GL_ACCOUNTS					= 'credit_gl_accounts';
var LOOKUP_TYPE_PURCHASE_ORDERS_HEADER_NUMBER		= 'purchase_orders_header_number';
var LOOKUP_TYPE_INSURANCE_POLICY_NUMBER				= 'insurance_policy_number';
var LOOKUP_TYPE_OWNERS								= 'owners';
var LOOKUP_TYPE_OWNERS_GL_ACCOUNTS					= 'owners_gl_accounts';
var LOOKUP_TYPE_OWNERS_WITH_PROPERTIES				= 'owners_with_properties';
var LOOKUP_TYPE_MANAGEMENT_CONTACTS					= 'management_contacts';
var LOOKUP_TYPE_AP_CODE_VENDOR						= 'ap_code_vendor';
var LOOKUP_TYPE_AP_CODE_NAME						= 'ap_code_name';
var LOOKUP_TYPE_FUTURE_CURRENT_NOTICE_RESIDENTS		= 'future_current_notice_residents';
var LOOKUP_TYPE_VENDOR_LOCATION_SUB_ACCOUNTS		= 'vendor_location_sub_accounts';

var LOOKUP_TYPE_CREATED_BY_USERS					= 'created_by_users';
var LOOKUP_TYPE_INVENTORY_ADJUSTMENT_PROPERTIES		= 'inventory_adjustment_properties';
var LOOKUP_TYPE_INVENTORY_AP_CODE					= 'inventory_ap_codes';
var LOOKUP_TYPE_VENDORS_WITH_WARRANTY_CONTACTS		= 'vendors_with_warranty_contacts';
var LOOKUP_TYPE_VENDORS_WITHOUT_WARRANTY_CONTACTS	= 'vendors_without_warranty_contacts';
var LOOKUP_TYPE_FIXED_ASSETS_AP_CODE				= 'fixed_assets_ap_codes';
var LOOKUP_TYPE_FIXED_ASSETS_PROPERTIES				= 'fixed_assets_properties';
var LOOKUP_TYPE_LOCATIONS_ON_PROPERTIES				= 'locations_on_properties';
var LOOKUP_TYPE_LOCATIONS_WITHIN_UNIT				= 'locations_within_unit';
var LOOKUP_TYPE_FIXED_ASSETS_UNITS					= 'fixed_assets_units';
var LOOKUP_TYPE_UNIT_OF_MEASURES					= 'unit_of_measures';
var LOOKUP_TYPE_CHARGE_CODE_FOR_GL_ACCOUNTS			= 'charge_codes_for_gl_account';
var LOOKUP_TYPE_INVOICES_ACCOUNT_NUMBER				= 'invoices_account_number';
var LOOKUP_TYPE_MANAGEMENT_FEES_VENDOR				= 'management_fees_vendor';

(function($) {
	$.fn.fastLookup = function(options) {
		var defaultOptions = {
			wait: 200, //idle time in microsecond
			dataBlobType: DATA_BLOB_TYPE_LEASE_CUSTOMERS, // default to Lease Customer
			captureLength: 1,
			zIndex: 150,
			callLookUpClose: true,
			hideFields: ''
		};

		options = options || {};
		options = $.extend({}, defaultOptions, options);

		callAjax 	 = new Array();
		boolTabValue = false;

		return this.each(function() {
			var $this = $(this),
				selectorToInsertResult = $this.data('class-selector-to-insert-result');
			callAjax[$this.attr('id')] = 1;

			if( selectorToInsertResult ) {
				$this.parents('.' + selectorToInsertResult).append('<div id="'+$this.attr('id')+'_searchData" class="fastResultBox" style="display: none; z-index: '+options.zIndex+'; margin:25px 0 0 -162px !ie;"></div>');
			} else {
				$this.after('<div id="'+$this.attr('id')+'_searchData" class="fastResultBox" style="display: none; z-index: '+options.zIndex+'; margin:25px 0 0 -162px !ie;"></div>');
			}

			$this.attr('autocomplete', 'off');

			var $contentDiv = $('#'+$this.attr('id')+'_searchData');

			var twOptions = {callback: function(){lookupAjaxRequest($this, $contentDiv, options);}} // typeWatch callback which will execute once the idle wait time is finished.
			twOptions = $.extend({},options,twOptions);

			bindKeyDownEventToContent($this, $contentDiv);

			$this.keypress(function(e){
				switch( e.which ) {
					case 13:
						e.preventDefault();
						return false;

					case 8:
					case 46:
						if( 0 == ( $.trim( $this.val() ) ).length ) $contentDiv.fadeOut( 'fast' );
					default:
						callAjax[$this.attr('id')] = 1;
						break;
				}
			});

			$this.typeWatch(twOptions);

			$this.unbind( 'paste' ).bind( 'paste', function(e) {
				// bind paste event
				boolTabValue				= false;
				callAjax[$this.attr('id')]	= 1;

				var fastlookupAutoselect = $this.hasClass( "js-fastlookup-autoselect" );
				if( fastlookupAutoselect ) {
					$this.attr( "data-paste", 1 );
				}

			});

			// for click
			if( selectorToInsertResult ) {
				$this.parents('.' + selectorToInsertResult).find('i.form-icon').off('click').on('click', function(event) {
					$this.removeAttr("data-keypress");
					event.stopPropagation();
					var currentSelectedVal = $this.val(),
						$clickedElement = jQuery(this);
					jQuery('i.current-clicked-lookup-element').removeClass('current-clicked-lookup-element');
					jQuery(this).addClass('current-clicked-lookup-element').css('background', 'url("/Common/assets/components/patterns/images/small_loader.gif") 6px 7px no-repeat');
					$this.val(' ');
					callAjax[$this.attr('id')] = 1;
					boolTabValue = false;
					jQuery('div.fast-lookup').hide();
					options = $.extend({},options,{complete: function() {
						$clickedElement.removeAttr('style');
						if($this.parents('.' + selectorToInsertResult).find('i.current-clicked-lookup-element').length === 0) {
							$this.parents('.' + selectorToInsertResult).find('div.fastResultBox').hide();
						} else {
							// only bind when we show fastResultBox
							if(jQuery('div.fast-lookup:visible').length == 1) {
								bindKeyDownEventToContent($this, $contentDiv, jQuery(document));
							}
						}

					}});
					lookupAjaxRequest($this, $contentDiv, options);
					$this.val(currentSelectedVal);
				});
			}
		});

		function selectFirstRecord($this){
			var selectorToInsertResult = $this.data('class-selector-to-insert-result'),
			fastResultBox = $this.closest( '.' + selectorToInsertResult).find( 'div.fastResultBox' );
			if( fastResultBox.is( ':visible' ) ) {
				fastResultBox.find( 'table tbody tr:nth-child(2)' ).trigger( "click" );
			}
		}

		function bindKeyDownEventToContent($this, $contentDiv, $element) {
			var selectorToInsertResult = $this.data('class-selector-to-insert-result');
			$element = $element || $this;

			var fastlookupAutoselect = $this.hasClass("js-fastlookup-autoselect");
			$this.on("keypress", function(e){
				$this.attr("data-keypress", 1);
				$this.prop("dropdown", 0);
			});

			$element.unbind('keydown').bind('keydown', function(e){

				switch(e.which) {
					case 40: // down
						e.preventDefault();
						moveSelection($contentDiv, 'down');
						break;

					case 38: // up
						e.preventDefault();
						moveSelection($contentDiv, 'up');
						break;

					case 13: // enter
						var active = $('tr.active:first', $contentDiv);

						if(active.length > 0) {
							e.preventDefault();
							$contentDiv.fadeOut('fast');
							rowOnClick($this, active);
						}
						break;

					case 27: // escape
						$contentDiv.fadeOut('fast');
						break;

					case 9: // tab
						//$this.val('');

						var active = $('tr.active:first', $contentDiv);
						if( active.length > 0 ) {
							rowOnClick( $this, active );
						}

						boolTabValue = true;
						$contentDiv.fadeOut('fast');

						if( selectorToInsertResult && $this.parents( '.' + selectorToInsertResult ).find( 'div.fastResultBox' ).is( ':visible' ) && $this.parents( '.' + selectorToInsertResult ).find( 'div.fastResultBox' ).find( ".active" ).length <= 0 ) {
							$this.parents( '.' + selectorToInsertResult ).find( 'div.fastResultBox' ).find( 'table tr:eq(1)' ).click();
						} else if( jQuery( this ).next( 'div.fastResultBox' ).is( ':visible' ) && jQuery( this ).next( 'div.fastResultBox' ).find( ".active" ).length <= 0 ) {
							jQuery( this ).next( 'div.fastResultBox' ).find( 'table tr:eq(1)' ).click();
						}

						$this.removeAttr("data-paste")
					 		.removeAttr("data-keypress");
						break;

					case 8: // backslash
					case 46: // delete
						if( 0 == ($.trim($this.val())).length ) $contentDiv.fadeOut('fast');
						break;
				}
			});
		}

		function lookupAjaxRequest($this, $contentDiv, options) {
			if( 0 == callAjax[$this.attr('id')] || true == boolTabValue ) {
				boolTabValue = false;
				return;
			}

			if( $contentDiv.find(':hidden') ) {
				if( 0 < $('#searchFromPackage').length ) {
					$contentDiv.html( __( 'Loading... Please wait...' ) );
				}
				$contentDiv.fadeIn('fast');
			}

			options = $.extend(
				{},
				options,
				{
					beforeSend: function() {},
					success: function( responseText ) {
						lookupAjaxOnSuccess( $this, $contentDiv, responseText );
					}
				}
			);

			if( 'undefined' != typeof( options.formId ) ) {
				options = $.extend( {}, options, { data: $( '#' + options.formId ).serialize() } );
			}

			//strRequestUrl = '/?module=fast_lookup&fast_lookup_filter[data_blob_type_id]='+options.dataBlobType+'&fast_lookup_filter[search]='+$this.val()+'&fast_lookup_filter[property_id]='+options.propertyId+'&result_data_id='+$this.attr('id');
			strRequestUrl = buildRequestUrl( $this, options );

			ajaxRequest( $contentDiv.attr( 'id' ), strRequestUrl, options);
		}

		function buildRequestUrl($this, options) {

			var strRequestUrl = '/?module=fast_lookup&fast_lookup_filter[search]='+encodeURIComponent($this.val())+'&result_data_id='+$this.attr('id')+'&fast_lookup_filter[property_id]='+options.propertyId;

			if( options.action ) {
				switch( options.action ) {
					case 'search_vendors':

						var strVendorFilterBy	= $('#vendor_filter_by').val();

						strRequestUrl = strRequestUrl + '&action='+options.action;
						var vendorPropertyIds	= [],
							vendorStatusIds		= [];

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[vendor_filter_by]= ' + strVendorFilterBy + '&fast_lookup_filter[vendor_property_ids]='+vendorPropertyIds.join(',');

						jQuery('#quick_search_status_id input:checkbox:checked').each(function(){
							vendorStatusIds.push(jQuery(this).val());
						});

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[vendor_status_ids]='+vendorStatusIds.join(',');

						break;

					case 'search_gl_account':
					case 'search_gl_account_by_gl_tree_id':
					case 'search_child_gl_accounts_by_gl_tree_id':
					case 'check21_fast_lookup':
					case 'search_purchase_orders':
					case 'search_property':
					case 'search_invoices':
					case 'search_checks_payee':
					case 'search_gl_account_is_linked_to_properties':
					case 'search_gl_account_for_journal_entries':
					case 'search_general_journal':
					case 'search_ap_payee_location_name':
					case 'search_vp_locations':
					case 'search_owners':
					case 'search_management_contact_owners':
					case 'search_created_by_users':
					case 'search_warranty_vendors':
					case 'search_locations':
					case 'search_current_future_residents':
					case 'search_management_fee_vendors':

						var intAllocationMethodId = $( '#invoice_allocation_type' ).val();

						strRequestUrl = strRequestUrl + '&action='+options.action +'&result_data_id='+ $this.attr('id');
						if( 'undefined' != typeof( options.assetTypeId ) ) {
							strRequestUrl += '&asset_type_id=' + $( '#asset_type_id' ).val();
						}
						if( 'undefined' != typeof( options.accountType ) ) {
							strRequestUrl += '&account_type=' + options.accountType;
						}

						if( 'undefined' != typeof( options.vendorFrom ) ) {
							strRequestUrl += '&vendor_from=' + options.vendorFrom;
						}

						if( 'undefined' != typeof( options.checkPropertyId ) ) {
							strRequestUrl += '&property_id=' + $( '#hidden_property_dropdown_header' ).val() + '&ap_formula_id=' + $( '#hidden_bulk_ap_formula_id' ).val();
						}

						if( true == $.isNumeric( intAllocationMethodId) ) {
							strRequestUrl += '&fast_lookup_filter[allocation_method_id]=' + intAllocationMethodId;
						}

						break;

					case 'search_gl_accounts_by_gl_account_usage_type_id':

						strRequestUrl = '/?module=fast_lookup&fast_lookup_filter[search]='+encodeURIComponent($this.val()) +'&result_data_id='+ $this.attr('id') + '&action=' + options.action;

						if( 'undefined' != typeof( options.isDistribution ) ) {
							strRequestUrl += '&fast_lookup_filter[is_distribution]=' + options.isDistribution;
						}

						if( 'undefined' != typeof( options.isContribution ) ) {
							strRequestUrl += '&fast_lookup_filter[is_contribution]=' + options.isContribution;
						}

						if( 'undefined' != typeof( options.additionalRequestData ) ) {
							strRequestUrl += '&fast_lookup_filter[gl_account_usage_type_id]=' + options.additionalRequestData;
						}

						break;

					case 'search_gl_accounts_by_ar_code_type':
						strRequestUrl = '/?module=fast_lookup&action=' + options.action + '&fast_lookup_filter[search]=' + encodeURIComponent( $this.val() ) + '&result_data_id=' + $this.attr( 'id' );
						break;

					case 'search_bank_accounts' :
						var strPropertyIds = '';
						strPropertyIds = jQuery( '#property_ids_' + $this.attr('id') ).val();
						strRequestUrl = strRequestUrl + '&action='+options.action + '&fast_lookup_filter[property_ids]='+strPropertyIds;
						break;

					case 'search_scheduled_general_journal':
						strRequestUrl = strRequestUrl + '&action='+options.action;
						break;

					case 'search_vendor_location_name':
						strRequestUrl = strRequestUrl + '&action='+options.action;
						break;

					case 'search_applicants':
						strRequestUrl = strRequestUrl + '&action='+options.action + '&fast_lookup_filter[lookup_type]='+options.lookupType;
						break;

					case 'search_customers':
						strRequestUrl = strRequestUrl + '&action=' + options.action + '&fast_lookup_filter[lookup_type]='+options.lookupType + '&fast_lookup_filter[property_id]=' + options.property_id + '&fast_lookup_filter[request_action]=' + options.request_action;
						break;

					case LOOKUP_TYPE_VP_LOCATION_NAME:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType + '&fast_lookup_filter[vp_vendor_id]='+ jQuery('#vp_vendor_id').val();
						break;

					case 'bulk_payment':
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[payment_ar_code_id]='+$('#payment_ar_code_id').val();
						break;

					case 'search_vendors_by_vendor_name':
						strRequestUrl = strRequestUrl + '&action='+options.action + '&fast_lookup_filter[lookup_type]='+options.lookupType;
						$strSkipedApPayeeIds = '';

						jQuery('input[id^="hidden_ap_payee_id_"]').each( function() {
							$strSkipedApPayeeIds = $strSkipedApPayeeIds + ',' + $( this ).val();
						});

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[skipped_ap_payee_ids]=' + $strSkipedApPayeeIds;
						break;

					case 'search_je_header_number':
					case 'search_ap_code_by_asset_type':
						if( 'undefined' != typeof( options.showItemType ) ) {
							strRequestUrl += '&show_item_Type_of=' + options.showItemType;
						}
						strRequestUrl = strRequestUrl + '&action='+options.action + '&fast_lookup_filter[lookup_type]='+options.lookupType;
						break;

					case 'search_purchase_orders_by_vendor':

						strRequestUrl = strRequestUrl + '&action='+options.action + '&fast_lookup_filter[lookup_type]='+options.lookupType;
						if( 'undefined' != typeof( $this.data( 'ap-payee-id' ) ) && 'undefined' != typeof( $this.data( 'ap-payee-location-id' ) ) ) {
							strRequestUrl = strRequestUrl + '&ap_payee_id=' + $this.data( 'ap-payee-id' ) + '&ap_payee_location_id=' + $this.data( 'ap-payee-location-id' );
						}
						break;

					case 'search_asset_units':
						strRequestUrl	= '/?module=fast_lookup&action='+options.action+'&fast_lookup_filter[search]='+encodeURIComponent($this.val());
						break;

					case 'search_charge_codes_for_gl_account':
						var intApCodeTypeId = $("input[type='radio'].form-radio:checked").val();
						strRequestUrl		= strRequestUrl + '/?module=fast_lookup&action='+options.action+ '&fast_lookup_filter[lookup_type]='+options.lookupType+'&ap_code_type_id= ' + intApCodeTypeId;
						break;

					case 'search_gl_account_by_gl_account_usage_type_id':
						strRequestUrl = strRequestUrl + '/?module=fast_lookup&action='+options.action+ '&fast_lookup_filter[lookup_type]='+options.lookupType;
						break;
				}
			}

			if( 'undefined' != typeof( options.propertyIds ) ) {
				strRequestUrl += '&fast_lookup_filter[property_ids]='+options.propertyIds
			}

			if( 'undefined' != typeof( options.pmEnabledOnly ) ) {
				strRequestUrl += '&fast_lookup_filter[pm_enabled_only]='+options.pmEnabledOnly
			}

			if( 'undefined' != typeof( options.activeResidentOnly ) ) {
				strRequestUrl += '&fast_lookup_filter[active_resident_only]='+options.activeResidentOnly
			}

			if( 'undefined' != typeof( options.restrictToLoadFmoProcessedLeases ) ) {
				strRequestUrl += '&fast_lookup_filter[restrict_to_load_fmo_processed_leases]='+options.restrictToLoadFmoProcessedLeases
			}

			if( 'undefined' != typeof( options.glTreeId ) ) {
				strRequestUrl += '&fast_lookup_filter[gl_tree_id]= ' + options.glTreeId;
			} else if( 'undefined' != $this.data( 'gl-tree-id' ) ) {
				strRequestUrl += '&fast_lookup_filter[gl_tree_id]= ' + $this.data( 'gl-tree-id' );
			}

			if( 'undefined' != typeof( options.glAccountTypeId ) ) {
				strRequestUrl += '&fast_lookup_filter[gl_account_type_id]=' + options.glAccountTypeId;
			}

			if( 'undefined' != typeof( options.glAccountTypeId ) ) {
				strRequestUrl += '&fast_lookup_filter[gl_account_type_id]=' + options.glAccountTypeId;
			}

			if( options.lookupType ) {

				switch( options.lookupType ) {

					case LOOKUP_TYPE_PROPERTY_UNITS:
					case LOOKUP_TYPE_CUSTOMERS_FOR_CHECK21_BATCHES:
					case LOOKUP_TYPE_CUSTOMERS_UNDELIVERED_PACKAGES:
					case LOOKUP_TYPE_CURRENT_FUTURE_RESIDENTS:
					case LOOKUP_TYPE_COMPANY_EMPLOYEES:
					case LOOKUP_TYPE_CALL_CENTER_WORK_ORDER_RESIDENTS:
					case LOOKUP_TYPE_AR_CODES:
					case LOOKUP_TYPE_ACCOUNTING_VENDORS:
					case LOOKUP_TYPE_PURCHASE_ORDERS_CREATED_BY:
					case LOOKUP_TYPE_AP_PAYEES_GL_ACCOUNT:
					case LOOKUP_TYPE_APPROVE_PURCHASE_ORDERS_CREATED_BY:
					case LOOKUP_TYPE_BANK_ACCOUNTS:
					case LOOKUP_TYPE_DEFAULT_PROPERTY:
					case LOOKUP_TYPE_PROPERTIES:
					case LOOKUP_TYPE_PROPERTIES_AND_GROUPS:
					case LOOKUP_TYPE_GENERAL_JOURNAL_PROPERTIES:
					case LOOKUP_TYPE_MANAGEMENT_CONTACTS:
					case LOOKUP_TYPE_FUTURE_CURRENT_NOTICE_RESIDENTS:

						var intPropertyId	= null;
						var intShowAllUnits	= $( '#show_all_units' ).val();
						var boolIsGuestManager	= $( '#is_guest_manager' ).val();
						var boolIsSelectMoreItems	= $( '#is_select_more_items' ).val();

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType;
						if( 1 == intShowAllUnits ) {

							var intHiddenPropertyTextBoxId = $this.attr('id').replace( 'property_unit_', '' );
							var intPropertyId = $( '#hidden_property_' + intHiddenPropertyTextBoxId ).val();

							if( 'undefined' == typeof( intPropertyId ) ) {
								intPropertyId = $( '#selected_property_' + intHiddenPropertyTextBoxId ).val();
							}
							if( 'undefined' == typeof intPropertyId ) {
								intPropertyId	= '';
							}
							strRequestUrl = strRequestUrl + '&fast_lookup_filter[show_all_units]= ' + intShowAllUnits + '&fast_lookup_filter[property_id]=' + intPropertyId;// + '&fast_lookup_filter[lookup_type]='+options.lookupType;
						}
						if( 1 == boolIsGuestManager ) {
							strRequestUrl = strRequestUrl + '&fast_lookup_filter[is_guest_manager]= ' + boolIsGuestManager;
						}
						if( 1 == boolIsSelectMoreItems ) {
							strRequestUrl = strRequestUrl + '&fast_lookup_filter[is_select_more_items]= ' + boolIsSelectMoreItems;
						}
						break;

					case LOOKUP_TYPE_INSURANCE_POLICY_NUMBER:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType+'&fast_lookup_filter[selected_provider]='+$('#selected_provider').val();
						break;
					case LOOKUP_TYPE_CREATED_BY_USERS:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType;
						break;
					case LOOKUP_TYPE_ADD_PURCHASE_ORDER_PROPERTY:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType;
						var intApBatchId = '';

						if( typeof $('#selected_ap_payee_id').val() != 'undefined' && '' != $('#selected_ap_payee_id').val() && typeof $('#selected_ap_payee_location_id').val() != 'undefined' && '' != $('#selected_ap_payee_location_id').val() ) {
							intApPayeeId			= $('#selected_ap_payee_id').val();
							intApPayeeLocationId	= $('#selected_ap_payee_location_id').val();
							if( '' == intApPayeeId || '' == intApPayeeLocationId ) {
								intApPayeeId = intApPayeeLocationId = null;
							}
						} else if( typeof $('#ap_payee_id').val() != 'undefined' && '' != $('#ap_payee_id').val() && typeof $('#hidden_apPayeeLocation').val() != 'undefined' && '' != $('#hidden_apPayeeLocation').val() ) {
							intApPayeeId			= $('#ap_payee_id').val();
							intApPayeeLocationId	= $('#hidden_apPayeeLocation').val();
							if( '' == intApPayeeId || '' == intApPayeeLocationId ) {
								intApPayeeLocationId = intApPayeeId = null;
							}
						} else if( '' != $this.data( 'ap-payee-id' ) && '' != $this.data( 'ap-payee-location-id' ) ) {
							intApPayeeId			= $this.data( 'ap-payee-id' );
							intApPayeeLocationId	= $this.data( 'ap-payee-location-id' );
						} else {
							intApPayeeLocationId = intApPayeeId = null;
							intApBatchId	  = $('#ap_batch_for_property').val();
						}
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[ap_payee_id]=' + intApPayeeId + '&fast_lookup_filter[ap_payee_location_id]=' + intApPayeeLocationId + '&fast_lookup_filter[ap_batch_id]=' + intApBatchId + '&fast_lookup_filter[is_show_allocation]=' + options.isShowAllocation;
						break;

					case LOOKUP_TYPE_PURCHASE_ORDERS_PO_NUMBER:
					case LOOKUP_TYPE_PURCHASE_ORDERS_HEADER_NUMBER:
					case LOOKUP_TYPE_PURCHASE_ORDERS_VENDOR:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType;

						var vendorStatusIds = [],
							apFinancialStatusTypeIds = [],
							apPhysicalStatusTypeIds = [],
							poPropertyIds 	= [];
						jQuery('#quick_search_ap_financial_status_type_id input:checkbox:checked').each(function(){
							apFinancialStatusTypeIds.push(jQuery(this).val());
						});

						jQuery('#quick_search_ap_physical_status_type_id input:checkbox:checked').each(function(){
							apPhysicalStatusTypeIds.push(jQuery(this).val());
						});

						jQuery('#quick_search_po_property_id input:checkbox:checked').each(function(){
							poPropertyIds.push(jQuery(this).val());
						});
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[is_bulk_receive]='+ options.boolIsBulkReceive +'&fast_lookup_filter[ap_financial_status_type_ids]='+apFinancialStatusTypeIds+'&fast_lookup_filter[ap_physical_status_type_ids]='+apPhysicalStatusTypeIds.join(',') + '&fast_lookup_filter[po_header_date]=' + jQuery('#po_header_date').val() + '&fast_lookup_filter[po_number]=' + jQuery('#po_number').val() + '&fast_lookup_filter[header_number]=' + jQuery('#header_number').val() + '&fast_lookup_filter[payee_name]=' + jQuery('#payee_name').val() +'&fast_lookup_filter[po_created_by]=' + jQuery('#purchase_orders_created_by_id').val() +'&fast_lookup_filter[po_property_id]='+poPropertyIds.join(',');
						break;

					case LOOKUP_TYPE_APPROVE_PURCHASE_ORDERS_PO_NUMBER:
					case LOOKUP_TYPE_APPROVE_PURCHASE_ORDERS_VENDOR:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType;

						var vendorStatusIds = [],
							poPropertyIds 	= [];

						vendorStatusIds.push(1);

						jQuery('#quick_search_approve_po_property_id input:checkbox:checked').each(function(){
							poPropertyIds.push(jQuery(this).val());
						});

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[po_status_type_ids]='+vendorStatusIds.join(',') + '&fast_lookup_filter[po_date_from]=' + jQuery('#po_date_from').val() + '&fast_lookup_filter[po_date_to]=' + jQuery('#po_date_to').val() + '&fast_lookup_filter[po_number]=' + jQuery('#text_po_number').val() + '&fast_lookup_filter[payee_name]=' + jQuery('#text_payee_name').val() +'&fast_lookup_filter[po_created_by]=' + jQuery('#approve_purchase_orders_created_by_id').val() +'&fast_lookup_filter[po_property_id]='+poPropertyIds.join(',');
						break;

					case LOOKUP_TYPE_VENDOR_PURCHASE_ORDERS_PO_NUMBER:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType;

						var vendorStatusIds   = [],
							poPropertyIds 	  = [],
							vendorLocationIds = [];

						jQuery('#quick_search_vendor_po_status_type_id input:checkbox:checked').each(function(){
							vendorStatusIds.push(jQuery(this).val());
						});

						jQuery('#quick_search_vendor_po_property_id input:checkbox:checked').each(function(){
							poPropertyIds.push(jQuery(this).val());
						});

						jQuery('#quick_search_vendor_location_id input:checkbox:checked').each(function(){
							vendorLocationIds.push(jQuery(this).val());
						});

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[vendor_po_status_type_ids]='+vendorStatusIds.join(',') + '&fast_lookup_filter[po_header_date_from]=' + jQuery('#po_header_date_from').val() + '&fast_lookup_filter[po_header_date_to]=' + jQuery('#po_header_date_to').val() + '&fast_lookup_filter[vendor_ap_payee_id]=' + jQuery('#vendor_po_header_ap_payee_id').val() + '&fast_lookup_filter[vendor_locations]=' + vendorLocationIds.join(',') +'&fast_lookup_filter[vendor_po_created_by]=' + jQuery('#vendor_purchase_orders_created_by_id').val() +'&fast_lookup_filter[vendor_po_property_id]='+poPropertyIds.join(',');
						break;

					case LOOKUP_TYPE_ADD_PURCHASE_ORDER_VENDOR:
					case LOOKUP_TYPE_BULK_INVOICE_VENDOR:
						var poApPayeeId				= $('#po_header_ap_payee_id').val();
						var intApPayeeTypeId		= $('#hidden_ap_payee_type').val();
						var intApPayeeStatusTypeId	= $('#hidden_ap_payee_status_type').val();
						var intIsFromAccounting		= $('#hidden_is_from_accounting').val();

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType + '&fast_lookup_filter[po_header_ap_payee_id]=' + poApPayeeId + '&fast_lookup_filter[ap_payee_type]=' + intApPayeeTypeId + '&fast_lookup_filter[ap_payee_status_type]=' + intApPayeeStatusTypeId + '&fast_lookup_filter[is_from_accounting]=' + intIsFromAccounting;

						break;

					case LOOKUP_TYPE_MANAGEMENT_FEES_VENDOR:

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType;

						break;

					case LOOKUP_TYPE_ACCOUNTING_INVOICES:
					case LOOKUP_TYPE_INVOICES_VENDOR:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType;

						var arrInvoicesPropertyIds 		= [],
							arrInvoicesPostStatusIds 	= [],
							arrInvoicesPaymentStatusIds = [],
							intShowReversals			= 0,
							strInvoice					= null;

						jQuery('#quick_search_invoice_property_id input:checkbox:checked').each(function(){
							arrInvoicesPropertyIds.push(jQuery(this).val());
						});

						jQuery('#quick_search_invoice_post_status_id input:checkbox:checked').each(function(){
							arrInvoicesPostStatusIds.push(jQuery(this).val());
						});

						jQuery('#quick_search_invoice_payment_status_id input:checkbox:checked').each(function(){
							arrInvoicesPaymentStatusIds.push(jQuery(this).val());
						});

						intShowReversals = 'checked' != jQuery('#showReversals').attr('checked') ? 0 : 1;

						strInvoice	= jQuery('#header_number').val();
						strInvoice	= strInvoice.replace(/[^(\x20-\x7F)]/g,'');

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[invoices_property_ids]='+arrInvoicesPropertyIds.join(',') + '&fast_lookup_filter[post_date_from]=' + jQuery('#post_date_from').val() + '&fast_lookup_filter[post_date_to]=' + jQuery('#post_date_to').val() + '&fast_lookup_filter[due_date_from]=' + jQuery('#due_date_from').val() +'&fast_lookup_filter[due_date_to]=' + jQuery('#due_date_to').val() +'&fast_lookup_filter[invoice_post_month_from]='+ jQuery('#invoice_post_month_from').val() +'&fast_lookup_filter[invoice_post_month_to]='+ jQuery('#invoice_post_month_to').val() +'&fast_lookup_filter[payment_post_month_from]='+ jQuery('#payment_post_month_from').val() +'&fast_lookup_filter[payment_post_month_to]='+ jQuery('#payment_post_month_to').val() +'&fast_lookup_filter[min_transaction_amount]='+ jQuery('#min_transaction_amount').val() +'&fast_lookup_filter[max_transaction_amount]='+ jQuery('#max_transaction_amount').val() + '&fast_lookup_filter[invoices_post_status_ids]='+arrInvoicesPostStatusIds.join(',') + '&fast_lookup_filter[invoices_payment_status_ids]='+arrInvoicesPaymentStatusIds.join(',') + '&fast_lookup_filter[show_reversals]=' + intShowReversals +'&fast_lookup_filter[invoices_created_by_id]='+ jQuery('#invoices_created_by_id').val() + '&fast_lookup_filter[header_number]=' + strInvoice + '&fast_lookup_filter[payee_name]=' + jQuery('#payee_name').val() + '&fast_lookup_filter[location_name]=' + jQuery('#location_name').val();
						break;

					case LOOKUP_TYPE_APPROVE_ACCOUNTING_INVOICES:
					case LOOKUP_TYPE_APPROVE_INVOICES_VENDOR:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType;

						var arrInvoicesPropertyIds 		= [],
							arrInvoicesPostStatusIds 	= [],
							strInvoice					= null;
							arrInvoicesPostStatusIds.push('0');

						jQuery('#quick_search_ap_invoice_property_id input:checkbox:checked').each(function(){
							arrInvoicesPropertyIds.push(jQuery(this).val());
						});

						strInvoice = jQuery('#ap_header_number').val();
						strInvoice = strInvoice.replace(/[^(\x20-\x7F)]/g,'');

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[invoices_property_ids]='+arrInvoicesPropertyIds.join(',') + '&fast_lookup_filter[post_date_from]=' + jQuery('#ap_post_date_from').val() + '&fast_lookup_filter[post_date_to]=' + jQuery('#ap_post_date_to').val() + '&fast_lookup_filter[due_date_from]=' + jQuery('#ap_due_date_from').val() +'&fast_lookup_filter[due_date_to]=' + jQuery('#ap_due_date_to').val() + '&fast_lookup_filter[invoices_post_status_ids]='+arrInvoicesPostStatusIds.join(',') +'&fast_lookup_filter[invoices_created_by_id]='+ jQuery('#ap_invoices_created_by_id').val() + '&fast_lookup_filter[header_number]=' + strInvoice + '&fast_lookup_filter[payee_name]=' + jQuery('#ap_payee_name').val() + '&fast_lookup_filter[location_name]=' + jQuery('#location_name').val();
						break;

					case LOOKUP_TYPE_APPROVE_PAYMENT_INVOICE:
					case LOOKUP_TYPE_APPROVE_PAYMENT_VENDOR:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType;

						var arrInvoicesPropertyIds	= [],
							arrInovicesAccountIds	= [],
							strInvoice				= null;

						jQuery('#quick_search_bank_account_ids input:checkbox:checked').each(function(){
							arrInovicesAccountIds.push(jQuery(this).val());
						});

						strInvoice = jQuery('#ap_header_number').val();
						strInvoice = strInvoice.replace(/[^(\x20-\x7F)]/g,'');

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[invoices_property_ids]='+arrInvoicesPropertyIds.join(',') + '&fast_lookup_filter[bank_account_ids]='+arrInovicesAccountIds.join(',') + '&fast_lookup_filter[post_date_from]=' + jQuery('#ap_post_date_from').val() + '&fast_lookup_filter[post_date_to]=' + jQuery('#ap_post_date_to').val() + '&fast_lookup_filter[due_date_from]=' + jQuery('#ap_due_date_from').val() +'&fast_lookup_filter[due_date_to]=' + jQuery('#ap_due_date_to').val() + '&fast_lookup_filter[header_number]=' + strInvoice + '&fast_lookup_filter[payee_name]=' + jQuery('#ap_payee_name').val();
						break;

					case LOOKUP_TYPE_FINANCIAL_TRANSACTION_INVOICE:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType;

						var arrInvoicesPropertyIds = [],
							arrInovicesLocationIds = [];

						jQuery('#quick_search_transaction_property_id input:checkbox:checked').each(function(){
							arrInvoicesPropertyIds.push(jQuery(this).val());
						});

						jQuery('#quick_search_transaction_location_id input:checkbox:checked').each(function(){
							arrInovicesLocationIds.push(jQuery(this).val());
						});

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[invoices_property_ids]='+arrInvoicesPropertyIds.join(',') + '&fast_lookup_filter[transaction_location_ids]='+arrInovicesLocationIds.join(',') + '&fast_lookup_filter[post_date_from]=' + jQuery('#post_date_from').val() + '&fast_lookup_filter[post_date_to]=' + jQuery('#post_date_to').val() + '&fast_lookup_filter[due_date_from]=' + jQuery('#due_date_from').val() +'&fast_lookup_filter[due_date_to]=' + jQuery('#due_date_to').val() +'&fast_lookup_filter[invoice_post_month_from]='+ jQuery('#invoice_post_month_from').val() +'&fast_lookup_filter[invoice_post_month_to]='+ jQuery('#invoice_post_month_to').val() +'&fast_lookup_filter[payment_post_month_from]='+ jQuery('#payment_post_month_from').val() +'&fast_lookup_filter[payment_post_month_to]='+ jQuery('#payment_post_month_to').val() + '&fast_lookup_filter[vendor_ap_payee_id]=' + jQuery('#vendor_financial_transation_ap_payee_id').val();
						break;

					case LOOKUP_TYPE_INVOICE_PO_NUMBER:

						var intPoApPayeeId					= jQuery('#po_header_ap_payee_id').val();
						var boolIsInvoiceRequestFromVendor	= jQuery.trim( jQuery( '#is_invoice_request_from_vendor' ).val() );
						var intApHeaderId					= jQuery('#ap_header_id').val();
						var intIsApCodePresent			= 0;

						if( 1 == jQuery('[id^="hidden_is_ap_code_present"]' ).val() ) {
							intIsApCodePresent = 1;
						}

						if( 0 == boolIsInvoiceRequestFromVendor.length || false == boolIsInvoiceRequestFromVendor ) {
							strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]=' + options.lookupType + '&fast_lookup_filter[is_ap_code_present]=' + intIsApCodePresent + '&fast_lookup_filter[ap_header_id]=' + intApHeaderId;
						} else {
							strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]=' + options.lookupType + '&fast_lookup_filter[invoice_ap_payee_id]='+ jQuery('#selected_ap_payee_id').val() + '&fast_lookup_filter[po_header_ap_payee_id]=' + intPoApPayeeId + '&fast_lookup_filter[is_ap_code_present]=' + intIsApCodePresent + '&ap_header_id=' + intApHeaderId;
						}

						break;

					case LOOKUP_TYPE_ATTACHED_PO_NUMBER:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType + '&fast_lookup_filter[po_number]='+ jQuery('#po_number').val();
						break;

					case LOOKUP_TYPE_PROCESS_CHECKS_INVOICE_NUMBER:
					case LOOKUP_TYPE_PROCESS_CHECKS_VENDOR:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType;

						var arrInvoicesPropertyIds	= [],
							arrInovicesAccountIds	= [],
							strInvoice				= null;

						jQuery('#quick_search_checks_bank_account_ids input:checkbox:checked').each(function(){
							arrInovicesAccountIds.push(jQuery(this).val());
						});

						strInvoice = jQuery('#ap_header_number').val();
						strInvoice = strInvoice.replace(/[^(\x20-\x7F)]/g,'');

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[invoices_property_ids]=' + arrInvoicesPropertyIds.join( ',' ) + '&fast_lookup_filter[bank_account_ids]='+ arrInovicesAccountIds.join( ',' ) + '&fast_lookup_filter[post_date_from]=' + jQuery( '#ap_post_date_from' ).val() + '&fast_lookup_filter[post_date_to]=' + jQuery( '#ap_post_date_to' ).val() + '&fast_lookup_filter[due_date_from]=' + jQuery( '#ap_due_date_from' ).val() +'&fast_lookup_filter[due_date_to]=' + jQuery( '#ap_due_date_to' ).val() + '&fast_lookup_filter[header_number]=' + strInvoice + '&fast_lookup_filter[payee_name]=' + jQuery( '#ap_payee_name' ).val() + '&fast_lookup_filter[hide_on_hold_invoices]=' + jQuery( '#hide_on_hold_invoices' ).val();
						break;

					case LOOKUP_TYPE_PROCESS_CHECKS_CC_INVOICE_NUMBER:
					case LOOKUP_TYPE_PROCESS_CHECKS_CC_VENDOR:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType;

						var arrInvoicesPropertyIds	= [],
							arrInovicesAccountIds	= [],
							strInvoice				= null;

						jQuery('#quick_search_checks_cc_property_ids input:checkbox:checked').each(function(){
							arrInvoicesPropertyIds.push(jQuery(this).val());
						});

						jQuery('#quick_search_checks_cc_bank_account_ids input:checkbox:checked').each(function(){
							arrInovicesAccountIds.push(jQuery(this).val());
						});

						strInvoice = jQuery('#credit_card_ap_header_number').val();
						strInvoice = strInvoice.replace(/[^(\x20-\x7F)]/g,'');

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[invoices_property_ids]=' + arrInvoicesPropertyIds.join( ',' ) + '&fast_lookup_filter[bank_account_ids]=' + arrInovicesAccountIds.join( ',' ) + '&fast_lookup_filter[post_date_from]=' + jQuery( '#credit_card_ap_post_date_from' ).val() + '&fast_lookup_filter[post_date_to]=' + jQuery( '#credit_card_ap_post_date_to' ).val() + '&fast_lookup_filter[due_date_from]=' + jQuery( '#credit_card_ap_header_due_date_from' ).val() +'&fast_lookup_filter[due_date_to]=' + jQuery( '#credit_card_ap_header_due_date_to' ).val() + '&fast_lookup_filter[header_number]=' + strInvoice + '&fast_lookup_filter[payee_name]=' + jQuery( '#credit_card_ap_payee_name' ).val() + '&fast_lookup_filter[hide_on_hold_invoices]=' + jQuery( '#hide_on_hold_credit_card_invoices' ).val();
						break;

					case LOOKUP_TYPE_ACCOUNTING_CHECKS_PAYEE:
					case LOOKUP_TYPE_ACCOUNTING_CHECKS_PAYMENT_NUMBER:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType;

						var arrInovicesAccountIds	= [],
							intPaymentStatusTypeId	= '',
							intPaymentType			= '';

						jQuery('#checks_bank_account_ids input:checkbox:checked').each(function(){
							arrInovicesAccountIds.push(jQuery(this).val());
						});

						intPaymentType = jQuery( '#ap_payment_type_id' ).val()

						if( intPaymentType == null || intPaymentType == '' ) {
							intPaymentType = '';
						}

						intPaymentStatusTypeId = jQuery( '#payment_status_type_id' ).val()

						if( intPaymentStatusTypeId == null || intPaymentStatusTypeId == '' ) {
							intPaymentStatusTypeId = '';
						}

						if( 0 == arrInovicesAccountIds.length ) {
							arrInovicesAccountIds.push( 'on' );
						}

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[bank_account_ids]=' + arrInovicesAccountIds.join(',') + '&fast_lookup_filter[ap_payment_type_id]=' + intPaymentType +'&fast_lookup_filter[payment_number]=' + jQuery('#payment_number').val() +'&fast_lookup_filter[check_number_min]=' + jQuery('#check_number_min').val() + '&fast_lookup_filter[check_number_max]=' + jQuery('#check_number_max').val() + '&fast_lookup_filter[post_month]=' + jQuery('#post_month').val() + '&fast_lookup_filter[check_date_from]=' + jQuery('#check_date_from').val() +'&fast_lookup_filter[check_date_to]=' + jQuery('#check_date_to').val() + '&fast_lookup_filter[amount_min]=' + jQuery('#amount_min').val() + '&fast_lookup_filter[amount_max]=' + jQuery('#amount_max').val()  + '&fast_lookup_filter[payment_status_type_id]=' + intPaymentStatusTypeId + '&fast_lookup_filter[payee_name]=' + jQuery('#payee_name').val()+'&fast_lookup_filter[is_unclaimed_property]='+jQuery( '#unclaimed_property_hide_show' ).val();
						break;

					case LOOKUP_TYPE_GL_ACCOUNTS:
					case LOOKUP_TYPE_GL_ACCOUNT_IS_LINKED_TO_PROPERTIES:

						var intPropertyId = $( '#hidden_' + $this.attr('id').replace( 'gl_account', 'property' ) ).val();

						if( 'undefined' == typeof( intPropertyId ) ) {
							intPropertyId = $( '#' + $this.attr('id').replace( 'gl_account', 'selected_property' ) ).val();
						}

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]=' + options.lookupType + '&fast_lookup_filter[property_id]=' + intPropertyId;
						break;

					case LOOKUP_TYPE_OWNERS_GL_ACCOUNTS:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]=' + options.lookupType;
						break;

					case LOOKUP_TYPE_OWNERS:
					case LOOKUP_TYPE_OWNERS_WITH_PROPERTIES:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]=' + options.lookupType;

						$strSkipedOwnerIds = '';

						if( 0 != $( '#skipped_owner_ids' ).length ) {
							$strSkipedOwnerIds = $( '#skipped_owner_ids' ).val();
						}

						jQuery( 'input[id^="owner_id_"]' ).each( function() {
							$strSkipedOwnerIds = $strSkipedOwnerIds + ',' + $( this ).val();
						});

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[skipped_owner_ids]=' + $strSkipedOwnerIds;
						break;

					case LOOKUP_TYPE_JOURNAL_ENTRY:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType;

						var arrJournalPropertyIds = [],
						intGlHeaderStatusTypeIds  = '';

						jQuery('#quick_search_journal_property input:checkbox:checked').each(function(){
							arrJournalPropertyIds.push(jQuery(this).val());
						});

						intGlHeaderStatusTypeIds = jQuery('#gl_header_status_type_ids').val()

						if( intGlHeaderStatusTypeIds == null || intGlHeaderStatusTypeIds == '' ) {
							intGlHeaderStatusTypeIds = '';
						}

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[journal_property_ids]='+arrJournalPropertyIds.join(',') + '&fast_lookup_filter[post_date_from]=' + jQuery('#post_date_from').val() + '&fast_lookup_filter[post_date_to]=' + jQuery('#post_date_to').val() + '&fast_lookup_filter[gl_account_id]=' + jQuery('#general_journal_gl_account_id').val() + '&fast_lookup_filter[amount_min]=' + jQuery('#amount_min').val() +'&fast_lookup_filter[amount_max]=' + jQuery('#amount_max').val() + '&fast_lookup_filter[reference]=' + jQuery('#reference').val() + '&fast_lookup_filter[created_by]=' + jQuery('#general_journal_created_by_id').val()  + '&fast_lookup_filter[gl_header_status_type_ids]=' + intGlHeaderStatusTypeIds;
						break;

					case LOOKUP_TYPE_AP_PAYEE_LOCATION_NAME:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType + '&fast_lookup_filter[ap_payee_id]='+ jQuery('#ap_payee_id').val() + '&fast_lookup_filter[is_primary_location_required]='+ jQuery('#is_primary_location_required').val();
						break;

					case LOOKUP_TYPE_VP_LOCATION_NAME:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType + '&fast_lookup_filter[vp_vendor_id]='+ jQuery('#vp_vendor_id').val();
						break;

					case LOOKUP_TYPE_VENDOR_LOCATION_NAME:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType + '&fast_lookup_filter[vp_vendor_id]='+ jQuery('#vp_vendor_id').val() + '&fast_lookup_filter[ap_payee_id]='+ jQuery('#ap_payee_id').val();
						break;

					case LOOKUP_TYPE_DEBIT_GL_ACCOUNTS:
						var strArCodeId				= $this.data('ar-code-id');
						var strArCodeTypeId			= $( '#ar_code_type_'+strArCodeId ).val();
						var strIsDefaultArCode		= $( '#is_default_ar_code').val();

						if( false == isNaN( strIsDefaultArCode ) ) {
							var strArCodeId = '';
						}

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType;
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[ar_code_type_id]='+strArCodeTypeId;
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[ar_code_id]='+strArCodeId;
						break;

					case LOOKUP_TYPE_CREDIT_GL_ACCOUNTS:
						var strArCodeId			= $this.data('ar-code-id');
						var strArCodeTypeId		= $( '#ar_code_type_'+strArCodeId ).val();
						var strArOriginId		= $( '#ar_origin_'+strArCodeId ).val();
						var strArTriggerId		= $( '#ar_trigger_'+strArCodeId ).val();

						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]='+options.lookupType;
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[ar_code_type_id]='+strArCodeTypeId;
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[ar_origin_id]='+strArOriginId;
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[ar_trigger_id]='+strArTriggerId;
						break;

					case LOOKUP_TYPE_AP_CODES:

						var intRowId		= $this.attr( 'id' ).replace( 'ap_codes_dropdown_', '' );
						var intApPayeeId	= null;
						var intPropertyId	= $( '#hidden_property_dropdown_' + intRowId ).val();

						if( 0 < $( '#selected_ap_payee_id' ).length ) {
							var intApPayeeId	= $( '#selected_ap_payee_id' ).val();
						} else if( undefined != $this.data( 'ap-payee-id' ) ) {
							var intApPayeeId	= $this.data( 'ap-payee-id' );
						}

						if( 'undefined' != typeof( options.lookupType ) ) {
							strRequestUrl = strRequestUrl  + '&fast_lookup_filter[lookup_type]=' + options.lookupType;
						}

						if( true == $.isNumeric( intApPayeeId ) && true == $.isNumeric( intPropertyId ) ) {
							strRequestUrl = strRequestUrl + '&fast_lookup_filter[ap_payee_id]=' + intApPayeeId + '&fast_lookup_filter[property_id]=' + intPropertyId;
						}

						break;

					case LOOKUP_TYPE_FIXED_ASSETS_UNITS:
					case LOOKUP_TYPE_LOCATIONS_WITHIN_UNIT:
					case LOOKUP_TYPE_INVENTORY_AP_CODE:
					case LOOKUP_TYPE_FIXED_ASSETS_PROPERTIES:
					case LOOKUP_TYPE_LOCATIONS_ON_PROPERTIES:
					case LOOKUP_TYPE_FIXED_ASSETS_AP_CODE:
					case LOOKUP_TYPE_INVENTORY_ADJUSTMENT_PROPERTIES:
					case LOOKUP_TYPE_FIXED_ASSETS_UNITS:

						intPropertyId	= $('#hidden_asset_property_id').val();

						if( 'undefined' != typeof( options.lookupType ) ) {
							strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]=' + options.lookupType + '&result_data_id=' + $this.attr( 'id' );
						}

						if( true == $.isNumeric( intPropertyId ) ) {
							strRequestUrl = strRequestUrl + '&fast_lookup_filter[property_id]=' + intPropertyId;
						}

						break;

					case LOOKUP_TYPE_VENDORS_WITH_WARRANTY_CONTACTS:
					case LOOKUP_TYPE_VENDORS_WITHOUT_WARRANTY_CONTACTS:
						if( 'undefined' != typeof( options.lookupType ) ) {
							strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]=' + options.lookupType;
						}

						break;

					case LOOKUP_TYPE_UNIT_OF_MEASURES:

						$intId 	= $this.attr( 'id' ).replace( 'unit_of_measure_', '' );
						intUnitOfMeasureId = $( '#hidden_ap_code_unit_of_measure_id_' + $intId ).val();

						if( 'undefined' != typeof( options.lookupType ) ) {
							strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]=' + options.lookupType;
						}

						if( true == $.isNumeric( intUnitOfMeasureId ) ) {
							strRequestUrl = strRequestUrl + '&fast_lookup_filter[unit_of_measure_id]=' + intUnitOfMeasureId;
						}

						break;

					case LOOKUP_TYPE_VENDOR_LOCATION_SUB_ACCOUNTS:

						intApPayeeId = intApPayeeLocationId = intApPayeeAccountId = null;

						if( 'undefined' != typeof $( '#selected_ap_payee_id' ).val() && '' != $( '#selected_ap_payee_id' ).val() && 'undefined' != typeof $( '#selected_ap_payee_location_id' ).val() && '' != $( '#selected_ap_payee_location_id' ).val() && 'undefined' != typeof $( '#selected_ap_payee_account_id' ).val() && '' != $( '#selected_ap_payee_account_id' ).val() ) {

							intApPayeeId			= $( '#selected_ap_payee_id' ).val();
							intApPayeeLocationId	= $( '#selected_ap_payee_location_id' ).val();
							intApPayeeAccountId		= $( '#selected_ap_payee_account_id' ).val();
						}

						if( 'undefined' != typeof( options.lookupType ) ) {
							strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]=' + options.lookupType + '&action='+options.action;
						}

						if( true == $.isNumeric( intApPayeeId ) && true == $.isNumeric( intApPayeeLocationId ) && true == $.isNumeric( intApPayeeAccountId ) ) {
							strRequestUrl = strRequestUrl + '&fast_lookup_filter[ap_payee_id]=' + intApPayeeId + '&fast_lookup_filter[ap_payee_location_id]=' + intApPayeeLocationId + '&fast_lookup_filter[ap_payee_account_id]=' + intApPayeeAccountId;
						}
						break;

					case LOOKUP_TYPE_INVOICES_ACCOUNT_NUMBER:
						strRequestUrl = strRequestUrl + '&fast_lookup_filter[lookup_type]=' + options.lookupType + '&fast_lookup_filter[vendor_account_number]=' + jQuery('#vendor_account_number').val();
						break;
				}

			} else {
				strRequestUrl = strRequestUrl + '&fast_lookup_filter[data_blob_type_id]='+options.dataBlobType;
			}

			if( '' != options.hideFields ) {
				strRequestUrl = strRequestUrl + '&fast_lookup_filter[hideFields]='+ escape(options.hideFields);
			}

			if( 'undefined' != typeof( options.targetLocale )){
				strRequestUrl += '&target_locale=' + options.targetLocale;
			}

			return strRequestUrl;
		}

		function lookupAjaxOnSuccess($this, $contentDiv, responseText) {
			$contentDiv.html(responseText);
			bindRowEvent($this);
			if(options.callLookUpClose) {
				lookupClose($this, $contentDiv);
			}

		}

		function bindRowEvent($this) {
			$( '#_resultDataDiv' + $this.attr( 'id' ) ).find( '.fastLookup-tr' ).bind( 'click', function() {
				rowOnClick( $this, $( this ) );
				return false;
			} );
			//$('#_resultDataDiv .fastLookup-tr').bind('click', function(){rowOnClick($(this)); return false;});
		}

		function rowOnClick($this, $row) {
			if(options.rowOnClick && $row.attr("id")) {
				eval(options.rowOnClick)(_resultData[$this.attr('id')][$row.attr('id')], $this );
				callAjax[$this.attr('id')] = 0;
			}
			$('#'+$this.attr('id')+'_searchData').fadeOut('fast');
		}

		function moveSelection($contentDiv, direction){
			if( $( ".fastLookup-tr", $contentDiv ).length > 0 ) {
				var tr = $("tr", $contentDiv);
				if( direction == "down" ) {
					var start = tr.eq(1);
				} else {
					var start = tr.filter(":last");
				}
				var active = $( "tr.active:first", $contentDiv );
				if( active.length > 0 ) {
					if( direction == "down" ) {
						start = active.next();
					} else {
						start = active.prev();
					}
				}
				tr.removeClass("active");
				start.addClass("active");
			}
		}

		function lookupClose($this, $contentDiv) {

			if( !$this.hasClass( "je-binded" ) ) {

				$( document ).on( "click", function( event ) {

					$this.addClass( "je-binded" );
					var selectorToInsertResult = $this.data( 'class-selector-to-insert-result' ),
						checkPaste = $this.data("paste"),
						checkKeypress = $this.data( "keypress" ),
						checkDropdown = $this.prop( "dropdown" );

					jQuery( document ).unbind( 'keydown' );

					if( $this.hasClass( "js-fastlookup-autoselect" ) && ( checkPaste === 1 || checkKeypress === 1 ) && !checkDropdown ) {
						selectFirstRecord($this);
					}

					$this.removeAttr( "data-paste" )
						 .removeAttr( "data-keypress" );

					$contentDiv.fadeOut( "slow" );
				});
			}
		}
	};
})(jQuery);