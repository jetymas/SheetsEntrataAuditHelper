try{'use strict';(function(r,I,B,C,N,A,O){(()=>{function G(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");}function J(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;a=c.call(a);var d,e=[];try{for(;(void 0===b||0<b--)&&!(d=a.next()).done;)e.push(d.value)}catch(m){var t=
{error:m}}finally{try{d&&!d.done&&(c=a.return)&&c.call(a)}finally{if(t)throw t.error;}}return e}function P(a){var b,c,d,e,t,m,k;let l=r.engagement,h={_q:null!=(b=null==l?void 0:l._q)?b:[],_configuration:{apiKey:null!=(d=null==(c=null==l?void 0:l._configuration)?void 0:c.apiKey)?d:"",serverUrl:null==(e=null==l?void 0:l._configuration)?void 0:e.serverUrl,serverZone:null!=(m=null==(t=null==l?void 0:l._configuration)?void 0:t.serverZone)?m:"US",options:{...(null==(k=null==l?void 0:l._configuration)?void 0:
k.options)}},_sentry:void 0,init(p,f){var g,q,n,v,y;if(h._configuration.apiKey)console.log("Engagement SDK has already been initialized. Ignoring additional init call.");else{h._configuration={...h._configuration,...f,apiKey:p,options:{...h._configuration.options,...(null==f?void 0:f.options)}};null!=(q=null==(g=h._configuration)?void 0:g.options)&&q.logger&&h._configuration.options.logger.enable(null!=(n=h._configuration.options.logLevel)?n:2);var u;null!=f&&f.cdnUrl?null!=(v=null==f?void 0:f.options)&&
v.splitting?u=`${f.cdnUrl}/engagement-browser/prod/split/index.js`:u=f.cdnUrl+"/engagement-browser/prod/index.min.js.gz":(p="EU"===h._configuration.serverZone?"https://cdn.eu.amplitude.com":"https://cdn.amplitude.com",null!=(y=null==f?void 0:f.options)&&y.splitting?u=`${p}/engagement-browser/prod/split/index.js`:u=`${p}/engagement-browser/prod/index.min.js.gz`);a(u)}},plugin(p){let f=h.init;return{name:"@amplitude/engagement-browser",type:"enrichment",async setup(g,q){var n,v;let y=null!=(n=g.instanceName)?
n:"$default_instance",u=Q.getInstance(y).identityStore;f(g.apiKey,{serverZone:g.serverZone,serverUrl:null!=(v=g.serverUrl)&&v.includes("amplitude.com")?void 0:g.serverUrl,...p,options:{logLevel:g.logLevel,logger:g.loggerProvider,...(null==p?void 0:p.options)}});await r.engagement.boot({user:()=>{let w=u.getIdentity();return{user_id:q.getUserId(),device_id:q.getDeviceId(),user_properties:w.userProperties,getSessionId:q.getSessionId}},integrations:[{track:w=>{q.track(w)}}]});u.addIdentityListener(w=>
{r.engagement._setUserProperties(w.userProperties)})},async execute(g){return r.engagement.forwardEvent(g),g}}}},z=h;return new Proxy(h,{get:function(p,f){if(f in z)return z[f];if("then"!==f)return"gs"===f?new Proxy({},{get:function(g,q){return function(){let n=Array.from(arguments);n.unshift(`${f}.${q}`);h._q.push(n)}}}):R.includes(f)?function(){let g=Array.prototype.slice.call(arguments);return new Promise((q,n)=>{g.unshift(f,q,n);h._q.push(g)})}:function(){let g=Array.prototype.slice.call(arguments);
g.unshift(f);h._q.push(g)}}})}var S=Object.create,K=Object.defineProperty,T=Object.getOwnPropertyDescriptor,U=Object.getOwnPropertyNames,V=Object.getPrototypeOf,W=Object.prototype.hasOwnProperty,X=(a,b,c,d)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let e of U(b))!W.call(a,e)&&e!==c&&K(a,e,{get:()=>b[e],enumerable:!(d=T(b,e))||d.enumerable});return a},Y=((a,b,c)=>(c=null!=a?S(V(a)):{},X(!b&&a&&a.__esModule?c:K(c,"default",{value:a,enumerable:!0}),a)))(((a,b)=>()=>(b||a((b={exports:{}}).exports,
b),b.exports))(a=>{Object.defineProperty(a,"__esModule",{value:!0});a=a.MessageType={};a.EngagementSnippet="ENGAGEMENT_SNIPPET";a.EngagementLoaded="ENGAGEMENT_LOADED";a.EngagementBooted="ENGAGEMENT_BOOTED";a.StopPreview="STOP_PREVIEW";a.FailedToLoadPreviewNudge="FAILED_TO_LOAD_PREVIEW_NUDGE"})()),Z=function(){function a(){}return a.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:"u">typeof navigator&&(navigator.languages&&navigator.languages[0]||navigator.language)||
"",platform:"Web",os:void 0,deviceModel:void 0}},a}(),aa=function(){function a(){this.queue=[]}return a.prototype.logEvent=function(b){this.receiver?this.receiver(b):512>this.queue.length&&this.queue.push(b)},a.prototype.setEventReceiver=function(b){this.receiver=b;0<this.queue.length&&(this.queue.forEach(function(c){b(c)}),this.queue=[])},a}(),x=function(){return x=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,
e)&&(a[e]=b[e])}return a},x.apply(this,arguments)},H=function(a,b){var c,d=["string","number","boolean","undefined"],e=typeof a;if(e!==typeof b)return!1;try{for(var t=G(d),m=t.next();!m.done;m=t.next())if(m.value===e)return a===b}catch(h){var k={error:h}}finally{try{m&&!m.done&&(c=t.return)&&c.call(t)}finally{if(k)throw k.error;}}if(null==a&&null==b)return!0;if(null==a||null==b||a.length!==b.length)return!1;k=Array.isArray(a);c=Array.isArray(b);if(k!==c)return!1;if(k&&c)for(k=0;k<a.length;k++){if(!H(a[k],
b[k]))return!1}else{k=Object.keys(a).sort();c=Object.keys(b).sort();if(!H(k,c))return!1;var l=!0;return Object.keys(a).forEach(function(h){H(a[h],b[h])||(l=!1)}),l}return!0};Object.entries||(Object.entries=function(a){for(var b=Object.keys(a),c=b.length,d=Array(c);c--;)d[c]=[b[c],a[b[c]]];return d});var ba=function(){function a(){this.identity={userProperties:{}};this.listeners=new Set}return a.prototype.editIdentity=function(){var b=this,c=x({},this.identity.userProperties),d=x(x({},this.identity),
{userProperties:c});return{setUserId:function(e){return d.userId=e,this},setDeviceId:function(e){return d.deviceId=e,this},setUserProperties:function(e){return d.userProperties=e,this},setOptOut:function(e){return d.optOut=e,this},updateUserProperties:function(e){var t,m,k,l,h,z=d.userProperties||{};try{for(var p=G(Object.entries(e)),f=p.next();!f.done;f=p.next()){var g=J(f.value,2),q=g[1];switch(g[0]){case "$set":try{for(var n=(m=void 0,G(Object.entries(q))),v=n.next();!v.done;v=n.next()){var y=
J(v.value,2),u=y[0];z[u]=y[1]}}catch(D){m={error:D}}finally{try{v&&!v.done&&(k=n.return)&&k.call(n)}finally{if(m)throw m.error;}}break;case "$unset":try{for(var w=(l=void 0,G(Object.keys(q))),E=w.next();!E.done;E=w.next())u=E.value,delete z[u]}catch(D){l={error:D}}finally{try{E&&!E.done&&(h=w.return)&&h.call(w)}finally{if(l)throw l.error;}}break;case "$clearAll":z={}}}}catch(D){var L={error:D}}finally{try{f&&!f.done&&(t=p.return)&&t.call(p)}finally{if(L)throw L.error;}}return d.userProperties=z,this},
commit:function(){return b.setIdentity(d),this}}},a.prototype.getIdentity=function(){return x({},this.identity)},a.prototype.setIdentity=function(b){var c=x({},this.identity);this.identity=x({},b);H(c,this.identity)||this.listeners.forEach(function(d){d(b)})},a.prototype.addIdentityListener=function(b){this.listeners.add(b)},a.prototype.removeIdentityListener=function(b){this.listeners.delete(b)},a}(),F="u">typeof globalThis?globalThis:"u">typeof r?r:self,Q=function(){function a(){this.identityStore=
new ba;this.eventBridge=new aa;this.applicationContextProvider=new Z}return a.getInstance=function(b){return F.analyticsConnectorInstances||(F.analyticsConnectorInstances={}),F.analyticsConnectorInstances[b]||(F.analyticsConnectorInstances[b]=new a),F.analyticsConnectorInstances[b]},a}(),R=["boot"],M=(a=>(a.Local="https://local.amplitude.com:3010/",a.Staging="https://apps.stag2.amplitude.com/",a.Production="https://app.amplitude.com/",a.ProductionEU="https://app.eu.amplitude.com/",a))(M||{}),ca=a=>
{if(r.opener)for(let b of Object.values(M))r.opener.postMessage({message:a},b)};r.engagement=(()=>{ca(Y.MessageType.EngagementSnippet);return P(a=>{a=[a||"https://cdn.amplitude.com/engagement-browser/prod/index.min.js.gz"];for(let b of a){a=I.createElement("script");a.src=b;a.id="engagement-sdk-bundle";let c=I.querySelector("[nonce]");c&&a.setAttribute("nonce",c.nonce||c.getAttribute("nonce"));I.getElementsByTagName("head")[0].appendChild(a)}})})()})();B=""!==B?B:void 0;C=""!==C?C:void 0;A={options:{splitting:"true"===
A,helpCenterEnabled:"true"===O}};C&&(A.serverUrl=C);B&&(A.serverZone=B);"true"===N&&r.amplitude?r.amplitude.add(r.engagement.plugin(A)):r.engagement.init("ee9707942d416ce57c8c5694a1106d3d",A)})(window,document,"US","","false","false","false");}catch(e){console.log(e);}