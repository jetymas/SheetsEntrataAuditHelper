(function( window, $, undefined ) {
	psi.cntToastResponse = {
		addResponseMessage: function( responseDetails, customMsg ) {
			var parent = $('<div class="cnt-alert"></div>'),
				cntAlertIconDiv = $('<div class="cnt-alert-icon"></div>'),
				cntAlertMsgDiv = $('<div class="cnt-alert-message"></div>'),
				cntAlertClose = $('<div class="cnt-alert-close"><span class="cnt-close-alert"><svg viewBox="0 0 28 28" class="entrata-svg-icon large"><use xlink:href="/Common/assets/components/patterns/svg/line_sprite.svg#x-icon"></use></svg></span></div>'),
				cntAlertMsg = $('<span></span>'),
				cntAlertHeading = $('<h2></h2>'),
				alertClass = 'warning',
				alertIcon = '<svg viewBox="-3 -3 40 40" class="entrata-svg-icon large"><use xlink:href="/Common/assets/components/patterns/svg/line_sprite.svg#stop-sign-icon"></use></svg>',
				alertHeading = __( 'Changes not saved' ),
				responseDiv = $('<div id="cnt_response_wrapper" class="response-msg" data-count="0"></div>');

			if( responseDetails.status ) {
				alertClass = 'success';
				alertIcon = '<svg viewBox="0 0 32 32" class="entrata-svg-icon large"><use xlink:href="/Common/assets/components/patterns/svg/line_sprite.svg#circle-check-icon"></use></svg>';
				alertHeading = __( 'Changes saved successfully' );
			}

			if( responseDetails.data.info ) {
				alertClass = 'info';
				alertIcon = '<svg viewBox="0 0 24 24" class="entrata-svg-icon"><use xlink:href="/Common/assets/components/patterns/svg/line_sprite.svg#info-icon"></use></svg>';
				alertHeading = __( 'Auto Archive' );
			}

			if( undefined !== customMsg && '' !== customMsg ) {
				alertHeading = customMsg;
			}

			if( responseDetails.data.hasOwnProperty( 'errorMsg' ) ) {
				var cntErrorDetails = $('<ul></ul>');
				$.each( responseDetails.data.errorMsg, function( i, msg ){
					cntErrorDetails.append( '<li>' + msg + '</li>' );
				} );

				cntAlertMsg.html( cntErrorDetails );
			} else if( responseDetails.data.hasOwnProperty( 'customHtml' ) ) {
				cntAlertMsg.html( responseDetails.data.customHtml );
			} else {
				cntAlertMsg.text( responseDetails.messages );
			}

			cntAlertHeading.text( alertHeading );

			cntAlertIconDiv.append( alertIcon );
			cntAlertMsgDiv.append( cntAlertHeading, cntAlertMsg );

			parent.addClass( alertClass ).append( cntAlertIconDiv, cntAlertMsgDiv, cntAlertClose );

			if( 0 == $('#body').find('.response-msg').length ) {
				$('#body').append( responseDiv );
			}

			$('#body').find('#cnt_response_wrapper').append( parent );
			setTimeout(function(){
				parent.addClass( 'close' ).animate();
				setTimeout(function(){
					parent.remove();
				}, 500);
			}, 8000 );

			cntAlertClose.click(function(){
				parent.addClass( 'close' );
				setTimeout(function(){
					parent.remove();
				}, 500);
			});
		}
	};
})( window, jQuery );
