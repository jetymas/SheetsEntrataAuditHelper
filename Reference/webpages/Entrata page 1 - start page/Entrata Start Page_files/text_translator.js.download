var textTranslator = (function() {

	var apiUrl = '';

	function init( url ) {
		apiUrl = url;
	}

	function showTranslatedText(el) {
		if( $(el).parent().next( '.js-translated-text' ).children('.js-trans-result').text().length === 0 ) {
			var src_el = $(el).parent().children( '.js-src-text' );
			var src_text = src_el.text();
			var targetLocale = $(el).data('target-locale');
			psi.patterns.ajaxRequest( {
				strElementSelector:src_el,
				url:apiUrl,
				type: 'POST',
				data:{text:src_text, targetLocale:targetLocale},
				success: function(response) {
					psi.patterns.removeLoadingImage( { strElementSelector: src_el } );
					$(el).parent().next( '.js-translated-text' ).children('.js-trans-result').text( response.messages );
					$(el).parent().hide();
					$(el).parent().next( '.js-translated-text' ).show();
				}
			});
		} else {
			$(el).parent( '.js-original-text' ).hide();
			$(el).parent().next( '.js-translated-text' ).show();
		}
	}

	function showOriginalText(el) {
		$(el).parent().prev( '.js-original-text' ).show();
		$(el).parent( '.js-translated-text' ).hide();
	}

	return{
		init:init,
		showTranslatedText:showTranslatedText,
		showOriginalText:showOriginalText
	};

})();
if( 'undefined' === typeof psi.textTranslator ) {
	psi.textTranslator = textTranslator;
}